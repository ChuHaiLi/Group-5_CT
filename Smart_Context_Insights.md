# TASK 6: PH√ÅT TRI·ªÇN C·∫¢NH B√ÅO NG·ªÆ C·∫¢NH V√Ä T√çNH NƒÇNG ƒê·∫∂C BI·ªÜT

## 1. M·ª§C TI√äU

### M·ª•c ti√™u ch√≠nh
X√¢y d·ª±ng h·ªá th·ªëng c·∫£nh b√°o th√¥ng minh v√† t√≠nh nƒÉng gi·∫£i th√≠ch ƒë·ªÉ n√¢ng cao tr·∫£i nghi·ªám ng∆∞·ªùi d√πng, gi√∫p h·ªç ƒë∆∞a ra quy·∫øt ƒë·ªãnh du l·ªãch t·ªët h∆°n d·ª±a tr√™n ng·ªØ c·∫£nh th·ªùi gian th·ª±c.

### M·ª•c ti√™u c·ª• th·ªÉ
1. **Ph√°t hi·ªán Hot Trend**: T·ª± ƒë·ªông nh·∫≠n di·ªán ƒë·ªãa ƒëi·ªÉm ƒëang th·ªãnh h√†nh d·ª±a tr√™n d·ªØ li·ªáu ƒë√°nh gi√°
2. **C·∫£nh b√°o Ng·ªØ c·∫£nh**: ƒê∆∞a ra c·∫£nh b√°o linh ho·∫°t d·ª±a tr√™n ƒëi·ªÅu ki·ªán th·ªùi ti·∫øt, th·ªùi gian, v√† ng√¢n s√°ch
3. **Gi·∫£i th√≠ch Khuy·∫øn ngh·ªã**: T·∫°o c√°c th·∫ª gi·∫£i th√≠ch minh b·∫°ch v·ªÅ l√Ω do ƒë·ªÅ xu·∫•t t·ª´ng ƒë·ªãa ƒëi·ªÉm
4. **B·∫£o v·ªá Ng∆∞·ªùi d√πng**: C·∫£nh b√°o k·ªãp th·ªùi c√°c r·ªßi ro ti·ªÅm ·∫©n (th·ªùi ti·∫øt x·∫•u, v∆∞·ª£t ng√¢n s√°ch, gi·ªù kh√¥ng an to√†n)

### T·∫ßm quan tr·ªçng
- **UX Enhancement**: TƒÉng ƒë·ªô tin c·∫≠y v√† s·ª± h√†i l√≤ng c·ªßa ng∆∞·ªùi d√πng
- **Safety First**: B·∫£o v·ªá an to√†n v√† t√†i ch√≠nh cho du kh√°ch
- **Transparency**: X√¢y d·ª±ng l√≤ng tin qua t√≠nh minh b·∫°ch trong thu·∫≠t to√°n
- **Personalization**: C√° nh√¢n h√≥a c·∫£nh b√°o theo t·ª´ng ng·ªØ c·∫£nh c·ª• th·ªÉ

---

## 2. PH√ÇN T√çCH CHI TI·∫æT

### 2.1. Ph√¢n t√≠ch B√†i to√°n

#### V·∫•n ƒë·ªÅ c·∫ßn gi·∫£i quy·∫øt
1. **Thi·∫øu Ng·ªØ c·∫£nh**: H·ªá th·ªëng ƒë·ªÅ xu·∫•t th√¥ng th∆∞·ªùng kh√¥ng xem x√©t ƒëi·ªÅu ki·ªán th·ªùi gian th·ª±c
2. **H·ªôp ƒêen (Black Box)**: Ng∆∞·ªùi d√πng kh√¥ng hi·ªÉu t·∫°i sao ƒë·ªãa ƒëi·ªÉm ƒë∆∞·ª£c ƒë·ªÅ xu·∫•t
3. **R·ªßi ro Ti·ªÅm ·∫©n**: Kh√¥ng c·∫£nh b√°o v·ªÅ th·ªùi ti·∫øt x·∫•u, ng√¢n s√°ch v∆∞·ª£t, ho·∫∑c th·ªùi gian kh√¥ng ph√π h·ª£p
4. **Thi·∫øu Xu h∆∞·ªõng**: Kh√¥ng n·∫Øm b·∫Øt ƒë∆∞·ª£c c√°c ƒë·ªãa ƒëi·ªÉm ƒëang "hot" trong c·ªông ƒë·ªìng

#### Y√™u c·∫ßu Ch·ª©c nƒÉng
- **Real-time Adaptation**: Th√≠ch ·ª©ng v·ªõi ƒëi·ªÅu ki·ªán thay ƒë·ªïi li√™n t·ª•c
- **Rule-based Logic**: S·ª≠ d·ª•ng IF-THEN ƒë·ªÉ d·ªÖ ki·ªÉm so√°t v√† ƒëi·ªÅu ch·ªânh
- **Multi-criteria Alert**: C·∫£nh b√°o ƒëa ti√™u ch√≠ (th·ªùi ti·∫øt, th·ªùi gian, ng√¢n s√°ch)
- **Explainable AI**: Gi·∫£i th√≠ch r√µ r√†ng m·ªçi quy·∫øt ƒë·ªãnh c·ªßa h·ªá th·ªëng

### 2.2. C√°c Th√†nh ph·∫ßn Ch√≠nh

#### A. Hot Trend Detection System
**Ch·ª©c nƒÉng**: Ph√°t hi·ªán ƒë·ªãa ƒëi·ªÉm ƒëang th·ªãnh h√†nh

**Ti√™u ch√≠ Hot Trend**:
- Rating ‚â• 4.5/5.0 (Ch·∫•t l∆∞·ª£ng cao)
- T·ªïng reviews ‚â• 100 (ƒê·ªô tin c·∫≠y)
- TƒÉng tr∆∞·ªüng review ‚â• 20% trong th√°ng g·∫ßn (ƒêang "l√™n ng√¥i")

**Gi√° tr·ªã**:
- Gi√∫p ng∆∞·ªùi d√πng kh√°m ph√° ƒëi·ªÉm ƒë·∫øn m·ªõi n·ªïi
- T·∫°o FOMO (Fear Of Missing Out) t√≠ch c·ª±c
- TƒÉng ƒë·ªô "fresh" cho khuy·∫øn ngh·ªã

#### B. Weather Alert System
**Ch·ª©c nƒÉng**: C·∫£nh b√°o d·ª±a tr√™n ƒëi·ªÅu ki·ªán th·ªùi ti·∫øt

**C√°c t√¨nh hu·ªëng x·ª≠ l√Ω**:
1. **M∆∞a (Rain)**: 
   - ƒê·ªÅ xu·∫•t chuy·ªÉn sang ho·∫°t ƒë·ªông trong nh√†
   - C·∫£nh b√°o c·∫•p ƒë·ªô: Warning
   
2. **N·∫Øng n√≥ng (Hot)**: 
   - Nh·∫Øc nh·ªü mang ƒë·ªì b·∫£o v·ªá
   - C·∫£nh b√°o c·∫•p ƒë·ªô: Info
   
3. **L·∫°nh (Cold)**: 
   - Khuy·∫øn ngh·ªã mang √°o ·∫•m
   - C·∫£nh b√°o c·∫•p ƒë·ªô: Info
   
4. **B√£o (Storm)**: 
   - Tuy·ªát ƒë·ªëi kh√¥ng ho·∫°t ƒë·ªông ngo√†i tr·ªùi
   - C·∫£nh b√°o c·∫•p ƒë·ªô: Danger

#### C. Time-based Alert System
**Ch·ª©c nƒÉng**: C·∫£nh b√°o theo th·ªùi gian trong ng√†y

**C√°c khung gi·ªù quan tr·ªçng**:
- **Gi·ªù cao ƒëi·ªÉm** (7-8h, 17-19h): C·∫£nh b√°o giao th√¥ng
- **Gi·ªù ƒÉn tr∆∞a** (11-13h): C·∫£nh b√°o nh√† h√†ng ƒë√¥ng
- **Gi·ªù t·ªëi mu·ªôn** (22h-5h): C·∫£nh b√°o an to√†n

#### D. Budget Tracking System
**Ch·ª©c nƒÉng**: Theo d√µi v√† c·∫£nh b√°o ng√¢n s√°ch

**Ng∆∞·ª°ng c·∫£nh b√°o**:
- **80% ng√¢n s√°ch**: Warning - "Ch√∫ √Ω chi ti√™u"
- **95% ng√¢n s√°ch**: Critical - "S·∫Øp h·∫øt ti·ªÅn!"

#### E. Explainability Tag System
**Ch·ª©c nƒÉng**: Gi·∫£i th√≠ch l√Ω do khuy·∫øn ngh·ªã

**C√°c lo·∫°i th·∫ª gi·∫£i th√≠ch**:
- ‚úì Kh·ªõp s·ªü th√≠ch
- ‚≠ê ƒê√°nh gi√° cao
- üìç V·ªã tr√≠ thu·∫≠n ti·ªán
- üí∞ Ph√π h·ª£p ng√¢n s√°ch
- üî• ƒêang th·ªãnh h√†nh
- ‚è∞ Th·ªùi gian ph√π h·ª£p

---

## 3. ƒê·∫¶U V√ÄO (INPUT)

### 3.1. D·ªØ li·ªáu ƒê·ªãa ƒëi·ªÉm
```json
{
  "name": "B·∫£o t√†ng L·ªãch s·ª≠ TP.HCM",
  "type": "museum",
  "environment_type": "indoor",
  "rating": 4.6,
  "total_reviews": 250,
  "review_growth_rate": 0.25,
  "estimated_cost": 50000,
  "tags": ["history", "culture", "education"],
  "suitable_time": "morning",
  "coordinates": {"lat": 10.7769, "lng": 106.7009}
}
```

**M√¥ t·∫£ c√°c tr∆∞·ªùng**:
- `environment_type`: "indoor" | "outdoor" | "both"
- `review_growth_rate`: T·ª∑ l·ªá tƒÉng tr∆∞·ªüng review (0.25 = +25%)
- `suitable_time`: Th·ªùi gian ph√π h·ª£p nh·∫•t ƒë·ªÉ gh√© thƒÉm

### 3.2. D·ªØ li·ªáu Ng∆∞·ªùi d√πng
```json
{
  "preferences": {
    "interests": ["history", "culture", "food"],
    "travel_time": "morning",
    "travel_style": "relaxed"
  },
  "total_budget": 500000,
  "current_spending": 350000
}
```

### 3.3. Ng·ªØ c·∫£nh (Context)
```json
{
  "weather": "rain",
  "visit_time": "2025-11-05T08:30:00",
  "current_spending": 350000,
  "score_breakdown": {
    "preference_score": 0.85,
    "distance_score": 0.75,
    "price_score": 0.80,
    "rating_score": 0.92
  }
}
```

**M√¥ t·∫£ c√°c tr∆∞·ªùng**:
- `weather`: "rain" | "hot" | "cold" | "storm" | "clear"
- `visit_time`: Th·ªùi gian d·ª± ki·∫øn ƒë·∫øn (ISO format)
- `score_breakdown`: ƒêi·ªÉm s·ªë chi ti·∫øt t·ª´ Task 3

---

## 4. ƒê·∫¶U RA (OUTPUT)

### 4.1. B√°o c√°o T·ªïng h·ª£p
```json
{
  "location_name": "B·∫£o t√†ng L·ªãch s·ª≠ TP.HCM",
  "location_type": "museum",
  
  "hot_trend": {
    "is_hot_trend": true,
    "tag": "üî• HOT TREND",
    "reasons": [
      "ƒê√°nh gi√° cao (4.6‚≠ê)",
      "Nhi·ªÅu l∆∞·ª£t ƒë√°nh gi√° (250 reviews)",
      "TƒÉng tr∆∞·ªüng nhanh (+25%)"
    ]
  },
  
  "alerts": [
    {
      "type": "weather",
      "level": "warning",
      "message": "üåßÔ∏è Tr·ªùi m∆∞a - ∆Øu ti√™n ho·∫°t ƒë·ªông trong nh√†"
    },
    {
      "type": "traffic",
      "level": "info",
      "message": "üöó Gi·ªù cao ƒëi·ªÉm - Giao th√¥ng ƒë√¥ng ƒë√∫c"
    },
    {
      "type": "budget",
      "level": "warning",
      "message": "‚ö†Ô∏è Ch√∫ √Ω: ƒê√£ chi 80.0% ng√¢n s√°ch"
    }
  ],
  
  "budget_status": {
    "spent": 400000,
    "remaining": 100000,
    "percentage": 80.0,
    "status": "warning"
  },
  
  "tags": [
    "‚úì Kh·ªõp s·ªü th√≠ch: history, culture",
    "‚≠ê ƒê√°nh gi√° xu·∫•t s·∫Øc (4.6/5)",
    "üìç V·ªã tr√≠ thu·∫≠n ti·ªán",
    "üí∞ Ph√π h·ª£p ng√¢n s√°ch",
    "üî• ƒêang th·ªãnh h√†nh",
    "‚è∞ Th·ªùi gian ph√π h·ª£p"
  ],
  
  "recommendations": [
    "‚úÖ ƒê·ªãa ƒëi·ªÉm ph√π h·ª£p ƒë·ªÉ gh√© thƒÉm"
  ]
}
```

### 4.2. C√°c Level C·∫£nh b√°o
- **info**: Th√¥ng tin tham kh·∫£o (m√†u xanh)
- **warning**: C·∫ßn ch√∫ √Ω (m√†u v√†ng)
- **danger**: Nghi√™m tr·ªçng, n√™n tr√°nh (m√†u ƒë·ªè)

---

## 5. GI·∫¢I TH√çCH LOGIC (PSEUDOCODE)

### 5.1. Hot Trend Detection Algorithm

```
FUNCTION check_hot_trend(location):
    // L·∫•y th√¥ng tin ƒë·ªãa ƒëi·ªÉm
    rating = location.rating
    total_reviews = location.total_reviews
    growth_rate = location.review_growth_rate
    
    // ƒê·ªãnh nghƒ©a ng∆∞·ª°ng
    MIN_RATING = 4.5
    MIN_REVIEWS = 100
    MIN_GROWTH = 0.20  // 20%
    
    // Ki·ªÉm tra ƒëi·ªÅu ki·ªán
    IF rating >= MIN_RATING AND 
       total_reviews >= MIN_REVIEWS AND 
       growth_rate >= MIN_GROWTH THEN
        
        // Thu th·∫≠p l√Ω do
        reasons = []
        IF rating >= MIN_RATING:
            ADD "ƒê√°nh gi√° cao ({rating}‚≠ê)" TO reasons
        IF total_reviews >= MIN_REVIEWS:
            ADD "Nhi·ªÅu l∆∞·ª£t ƒë√°nh gi√° ({total_reviews})" TO reasons
        IF growth_rate >= MIN_GROWTH:
            ADD "TƒÉng tr∆∞·ªüng nhanh (+{growth_rate*100}%)" TO reasons
        
        RETURN {
            is_hot_trend: TRUE,
            tag: "üî• HOT TREND",
            reasons: reasons
        }
    ELSE
        RETURN {
            is_hot_trend: FALSE,
            tag: "",
            reasons: []
        }
END FUNCTION
```

**Gi·∫£i th√≠ch**:
1. Ki·ªÉm tra 3 ƒëi·ªÅu ki·ªán ƒë·ªìng th·ªùi (AND logic)
2. N·∫øu th·ªèa m√£n c·∫£ 3 ‚Üí Hot Trend
3. Thu th·∫≠p l√Ω do c·ª• th·ªÉ ƒë·ªÉ gi·∫£i th√≠ch cho ng∆∞·ªùi d√πng
4. Tr·∫£ v·ªÅ k·∫øt qu·∫£ c√≥ c·∫•u tr√∫c r√µ r√†ng

---

### 5.2. Weather Alert Algorithm

```
FUNCTION generate_weather_alerts(weather_condition, location_type):
    alerts = []
    
    // ƒê·ªãnh nghƒ©a quy t·∫Øc th·ªùi ti·∫øt
    WEATHER_RULES = {
        'rain': {
            'indoor': TRUE,
            'message': 'üåßÔ∏è Tr·ªùi m∆∞a - ∆Øu ti√™n ho·∫°t ƒë·ªông trong nh√†',
            'level': 'warning'
        },
        'storm': {
            'outdoor': FALSE,
            'message': '‚õàÔ∏è C·∫£nh b√°o b√£o - Tr√°nh ho·∫°t ƒë·ªông ngo√†i tr·ªùi',
            'level': 'danger'
        },
        'hot': {
            'message': '‚òÄÔ∏è Tr·ªùi n·∫Øng n√≥ng - N√™n mang n∆∞·ªõc',
            'level': 'info'
        },
        'cold': {
            'message': '‚ùÑÔ∏è Tr·ªùi l·∫°nh - Mang √°o ·∫•m',
            'level': 'info'
        }
    }
    
    // Ki·ªÉm tra ƒëi·ªÅu ki·ªán th·ªùi ti·∫øt
    IF weather_condition IN WEATHER_RULES THEN
        rule = WEATHER_RULES[weather_condition]
        
        // C·∫£nh b√°o chung
        ADD {
            type: 'weather',
            level: rule.level,
            message: rule.message
        } TO alerts
        
        // C·∫£nh b√°o ƒë·∫∑c bi·ªát cho outdoor
        IF location_type == 'outdoor' THEN
            IF rule.indoor == TRUE THEN
                ADD {
                    type: 'recommendation',
                    level: 'warning',
                    message: '‚ö†Ô∏è ƒê·ªãa ƒëi·ªÉm ngo√†i tr·ªùi - C√¢n nh·∫Øc thay ƒë·ªïi'
                } TO alerts
            
            IF rule.outdoor == FALSE THEN
                ADD {
                    type: 'recommendation',
                    level: 'danger',
                    message: 'üö´ Kh√¥ng n√™n ƒëi - Nguy hi·ªÉm'
                } TO alerts
    
    RETURN alerts
END FUNCTION
```

**Gi·∫£i th√≠ch**:
1. **Rule-based approach**: M·ªói ƒëi·ªÅu ki·ªán th·ªùi ti·∫øt c√≥ quy t·∫Øc ri√™ng
2. **Layered warnings**: C·∫£nh b√°o chung + c·∫£nh b√°o ƒë·∫∑c bi·ªát cho outdoor
3. **Level escalation**: M∆∞a (warning) ‚Üí B√£o (danger)
4. **Actionable advice**: Kh√¥ng ch·ªâ c·∫£nh b√°o m√† c√≤n g·ª£i √Ω h√†nh ƒë·ªông

---

### 5.3. Time-based Alert Algorithm

```
FUNCTION generate_time_alerts(visit_time):
    alerts = []
    hour = EXTRACT_HOUR(visit_time)
    
    // ƒê·ªãnh nghƒ©a khung gi·ªù
    RUSH_HOURS = [7, 8, 17, 18, 19]
    LUNCH_HOURS = [11, 12, 13]
    NIGHT_HOURS = [22, 23, 0, 1, 2, 3, 4, 5]
    
    // Ki·ªÉm tra gi·ªù cao ƒëi·ªÉm
    IF hour IN RUSH_HOURS THEN
        ADD {
            type: 'traffic',
            level: 'info',
            message: 'üöó Gi·ªù cao ƒëi·ªÉm - Giao th√¥ng ƒë√¥ng ƒë√∫c'
        } TO alerts
    
    // Ki·ªÉm tra gi·ªù ƒÉn tr∆∞a
    IF hour IN LUNCH_HOURS THEN
        ADD {
            type: 'crowd',
            level: 'info',
            message: 'üçΩÔ∏è Gi·ªù ƒÉn tr∆∞a - Nh√† h√†ng c√≥ th·ªÉ ƒë√¥ng'
        } TO alerts
    
    // Ki·ªÉm tra gi·ªù t·ªëi mu·ªôn
    IF hour IN NIGHT_HOURS THEN
        ADD {
            type: 'safety',
            level: 'warning',
            message: 'üåô T·ªëi mu·ªôn - Ch√∫ √Ω an to√†n'
        } TO alerts
    
    RETURN alerts
END FUNCTION
```

**Gi·∫£i th√≠ch**:
1. **Temporal awareness**: Nh·∫≠n bi·∫øt th·ªùi gian trong ng√†y
2. **Pattern recognition**: X√°c ƒë·ªãnh c√°c m·∫´u th·ªùi gian quan tr·ªçng
3. **Contextual advice**: L·ªùi khuy√™n ph√π h·ª£p t·ª´ng khung gi·ªù
4. **Safety-first**: ∆Øu ti√™n c·∫£nh b√°o an to√†n

---

### 5.4. Budget Tracking Algorithm

```
FUNCTION check_budget_status(spent, total_budget):
    IF total_budget == 0 THEN
        RETURN {status: 'unknown', alerts: []}
    
    // T√≠nh t·ª∑ l·ªá chi ti√™u
    ratio = spent / total_budget
    alerts = []
    
    // Ng∆∞·ª°ng c·∫£nh b√°o
    WARNING_THRESHOLD = 0.80   // 80%
    CRITICAL_THRESHOLD = 0.95  // 95%
    
    // Ki·ªÉm tra ng∆∞·ª°ng
    IF ratio >= CRITICAL_THRESHOLD THEN
        ADD {
            type: 'budget',
            level: 'danger',
            message: 'üí∏ C·∫¢NH B√ÅO: ƒê√£ chi {ratio*100}% ng√¢n s√°ch!'
        } TO alerts
        status = 'critical'
        
    ELSE IF ratio >= WARNING_THRESHOLD THEN
        ADD {
            type: 'budget',
            level: 'warning',
            message: '‚ö†Ô∏è Ch√∫ √Ω: ƒê√£ chi {ratio*100}% ng√¢n s√°ch'
        } TO alerts
        status = 'warning'
        
    ELSE
        status = 'good'
    
    RETURN {
        spent: spent,
        remaining: total_budget - spent,
        percentage: ratio * 100,
        status: status,
        alerts: alerts
    }
END FUNCTION
```

**Gi·∫£i th√≠ch**:
1. **Progressive alerts**: C·∫£nh b√°o d·∫ßn d·∫ßn khi ti·∫øn g·∫ßn ng∆∞·ª°ng
2. **Threshold-based**: S·ª≠ d·ª•ng 2 ng∆∞·ª°ng (80% v√† 95%)
3. **Visual feedback**: Emoji v√† m√†u s·∫Øc ƒë·ªÉ tƒÉng nh·∫≠n th·ª©c
4. **Actionable info**: Hi·ªÉn th·ªã s·ªë ti·ªÅn c√≤n l·∫°i ƒë·ªÉ ng∆∞·ªùi d√πng quy·∫øt ƒë·ªãnh

---

### 5.5. Explainability Tag Generation

```
FUNCTION generate_explainability_tags(location, user_prefs, score_breakdown):
    tags = []
    
    // 1. Ki·ªÉm tra s·ªü th√≠ch kh·ªõp
    location_tags = SET(location.tags)
    user_interests = SET(user_prefs.interests)
    matched = location_tags INTERSECT user_interests
    
    IF matched IS NOT EMPTY THEN
        top_2 = TAKE_FIRST(matched, 2)
        ADD "‚úì Kh·ªõp s·ªü th√≠ch: {JOIN(top_2, ', ')}" TO tags
    
    // 2. Ki·ªÉm tra rating cao
    IF location.rating >= 4.5 THEN
        ADD "‚≠ê ƒê√°nh gi√° xu·∫•t s·∫Øc ({location.rating}/5)" TO tags
    
    // 3. Ki·ªÉm tra kho·∫£ng c√°ch
    IF score_breakdown.distance_score > 0.7 THEN
        ADD "üìç V·ªã tr√≠ thu·∫≠n ti·ªán" TO tags
    
    // 4. Ki·ªÉm tra gi√°
    IF score_breakdown.price_score > 0.7 THEN
        ADD "üí∞ Ph√π h·ª£p ng√¢n s√°ch" TO tags
    
    // 5. Ki·ªÉm tra hot trend
    hot_trend = check_hot_trend(location)
    IF hot_trend.is_hot_trend THEN
        ADD "üî• ƒêang th·ªãnh h√†nh" TO tags
    
    // 6. Ki·ªÉm tra th·ªùi gian
    IF location.suitable_time == user_prefs.travel_time THEN
        ADD "‚è∞ Th·ªùi gian ph√π h·ª£p" TO tags
    
    RETURN tags
END FUNCTION
```

**Gi·∫£i th√≠ch**:
1. **Multi-criteria explanation**: Gi·∫£i th√≠ch t·ª´ nhi·ªÅu g√≥c ƒë·ªô
2. **Set intersection**: T√¨m ƒëi·ªÉm chung gi·ªØa s·ªü th√≠ch v√† ƒë·ªãa ƒëi·ªÉm
3. **Threshold-based**: Ch·ªâ hi·ªÉn th·ªã ƒëi·ªÉm n·ªïi b·∫≠t (>0.7)
4. **User-centric**: T·∫≠p trung v√†o l√Ω do quan tr·ªçng v·ªõi ng∆∞·ªùi d√πng
5. **Visual clarity**: Emoji gi√∫p nh·∫≠n di·ªán nhanh

---

### 5.6. Comprehensive Report Generator (Main Logic)

```
FUNCTION generate_comprehensive_report(location, user_data, context):
    report = INITIALIZE_REPORT(location)
    
    // B∆Ø·ªöC 1: Ki·ªÉm tra Hot Trend
    report.hot_trend = check_hot_trend(location)
    
    // B∆Ø·ªöC 2: C·∫£nh b√°o Th·ªùi ti·∫øt
    IF 'weather' IN context THEN
        weather_alerts = generate_weather_alerts(
            context.weather,
            location.environment_type
        )
        APPEND weather_alerts TO report.alerts
    
    // B∆Ø·ªöC 3: C·∫£nh b√°o Th·ªùi gian
    IF 'visit_time' IN context THEN
        time_alerts = generate_time_alerts(context.visit_time)
        APPEND time_alerts TO report.alerts
    
    // B∆Ø·ªöC 4: Ki·ªÉm tra Ng√¢n s√°ch
    IF 'current_spending' IN context AND 'total_budget' IN user_data THEN
        estimated_cost = location.estimated_cost
        new_spending = context.current_spending + estimated_cost
        
        budget_status = check_budget_status(
            new_spending,
            user_data.total_budget
        )
        
        report.budget_status = budget_status
        APPEND budget_status.alerts TO report.alerts
    
    // B∆Ø·ªöC 5: T·∫°o Th·∫ª gi·∫£i th√≠ch
    tags = generate_explainability_tags(
        location,
        user_data.preferences,
        context.score_breakdown
    )
    report.tags = tags
    
    // B∆Ø·ªöC 6: T·ªïng h·ª£p Khuy·∫øn ngh·ªã
    danger_alerts = COUNT_ALERTS_BY_LEVEL(report.alerts, 'danger')
    
    IF danger_alerts == 0 THEN
        ADD "‚úÖ ƒê·ªãa ƒëi·ªÉm ph√π h·ª£p ƒë·ªÉ gh√© thƒÉm" TO report.recommendations
    ELSE
        ADD "‚ö†Ô∏è C√¢n nh·∫Øc k·ªπ tr∆∞·ªõc khi gh√© thƒÉm" TO report.recommendations
    
    RETURN report
END FUNCTION
```

**Gi·∫£i th√≠ch Logic t·ªïng h·ª£p**:

1. **Modular Design**: M·ªói ch·ª©c nƒÉng l√† m·ªôt module ƒë·ªôc l·∫≠p
2. **Sequential Processing**: X·ª≠ l√Ω tu·∫ßn t·ª± t·ª´ng ph·∫ßn
3. **Accumulation**: T√≠ch l≈©y alerts t·ª´ nhi·ªÅu ngu·ªìn
4. **Final Decision**: Quy·∫øt ƒë·ªãnh cu·ªëi d·ª±a tr√™n t·∫•t c·∫£ th√¥ng tin
5. **Fail-safe**: Ki·ªÉm tra t·ªìn t·∫°i d·ªØ li·ªáu tr∆∞·ªõc khi x·ª≠ l√Ω

**Flow t·ªïng qu√°t**:
```
Input ‚Üí Hot Trend Check ‚Üí Weather Alert ‚Üí Time Alert 
     ‚Üí Budget Check ‚Üí Explainability Tags ‚Üí Final Report
```

---
